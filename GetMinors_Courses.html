<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery Ajax</title>
<!--
    Don't Use jquery-latest.js
    https://blog.jquery.com/2014/07/03/dont-use-jquery-latest-js/
-->
<script src="https://code.jquery.com/jquery-3.6.0.js">
</script>
<script>
$(document).ready(function(){

	function getData(pathName){
                return $.ajax({
                        type: 'get',
                        url:'http://solace.ist.rit.edu/~plgics/proxy.php',
                        dataType:'json',
                        data: pathName,
                        cache:false,
                        async:true
                        })
    }

    getData({path:'/minors/'}).done(function(output, status, jqXHR){
        console.log(status);
        console.log(jqXHR);
        for (var i = 0; i < output.UgMinors.length; i++) {
            $.each(output.UgMinors[i], function(index2, value2){
            if (index2 == "name") {
                courseName = value2;
                $("#content").append(
                    "<b>" + index2 + "</b>: " + value2 + "<br>"
                )
                } else if (index2 == "courses") {
                    $("#content").append(
                            "<b>Courses</b>, see course details at end of page:<br>"
                        )
                    $.each(value2, function(index4A, value4A){
                        $("#content").append(
                            value4A + "<br>"
                        )
                    })
                    $.each(value2, function(index4, value4) {
                        getData({path:'/course/courseID=' + value4}).done(function(output1) {
                            $.each(output1, function(index20, value20){
                                    $("#content").append(
                                        "<b>" + index20 + "</b>: " + value20 + "<br>"
                                    )
                            })
                            $("#content").append("<br>");
                        })                        
                    })

                    } else {
                        $("#content").append(
                            "<b>" + index2 + "</b>: " + value2 + "<br>"
                        )
                    }
                    $("#content").append("<br>");
                })
            }
            
    });
})

	

</script>
</head>
<body>
  <h2>IST Dept Site</h2>
	<section id="content" style="height:300px"></section>
</body>
</html>